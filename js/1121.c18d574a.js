"use strict";(globalThis["webpackChunksik_ubl"]=globalThis["webpackChunksik_ubl"]||[]).push([[1121],{6690:(a,e,t)=>{t.d(e,{Z:()=>n});const n={1:{label:"Tugas Diberikan",color:"positive"},2:{label:"Sedang Dikerjakan",color:"warning"},3:{label:"Sudah Dikerjakan",color:"positive"},4:{label:"Sedang Ditinjau",color:"primary"},5:{label:"Selesai",color:"positive"},6:{label:"Revisi",color:"negative"}}},1121:(a,e,t)=>{t.r(e),t.d(e,{default:()=>T});var n=t(9835),s=t(6970);const r={class:"q-pa-md"},l={class:"row q-gutter-x-xs"},i={class:"row q-gutter-x-md"};function o(a,e,t,o,u,_){const d=(0,n.up)("q-icon"),k=(0,n.up)("q-input"),p=(0,n.up)("q-td"),m=(0,n.up)("q-btn"),w=(0,n.up)("q-badge"),g=(0,n.up)("q-tr"),b=(0,n.up)("q-table"),y=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(y,null,{default:(0,n.w5)((()=>[(0,n._)("div",r,[(0,n.Wm)(b,{flat:"",bordered:"",title:"Tugas",rows:u.rows,columns:u.columns,loading:u.loading,"row-key":"name"},{"top-right":(0,n.w5)((()=>[(0,n.Wm)(k,{borderless:"",dense:"",debounce:"300",modelValue:u.filter,"onUpdate:modelValue":e[0]||(e[0]=a=>u.filter=a),placeholder:"Search"},{append:(0,n.w5)((()=>[(0,n.Wm)(d,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,n.w5)((e=>[(0,n.Wm)(g,{props:e},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{key:"nama_karyawan",props:e},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.row.jabatan_karyawan_master_tugas_kb_id_karyawanTojabatan_karyawan.karyawan.nama_karyawan),1)])),_:2},1032,["props"]),(0,n.Wm)(p,{key:"judul_tugas",props:e},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.row.judul_tugas),1)])),_:2},1032,["props"]),(0,n.Wm)(p,{key:"deskripsi_tugas",props:e},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.row.deskripsi_tugas),1)])),_:2},1032,["props"]),(0,n.Wm)(p,{key:"ket_revisi",props:e},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.row.ket_revisi??"-"),1)])),_:2},1032,["props"]),(0,n.Wm)(p,{key:"nama_unit_kerja",props:e},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.row.jabatan_karyawan_master_tugas_kb_id_karyawanTojabatan_karyawan.unit_kerja_jabatan_karyawan_unit_kerjaTounit_kerja.nama_unit_kerja),1)])),_:2},1032,["props"]),(0,n.Wm)(p,{key:"deadline",props:e},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.row.deadline),1)])),_:2},1032,["props"]),(0,n.Wm)(p,{key:"lampiran",props:e},{default:(0,n.w5)((()=>[(0,n._)("div",l,[(0,n.Wm)(m,{label:"Lampiran",color:"primary",unelevated:"",outline:"",href:`${a.$baseLampiran}${e.row.lampiran}`,type:"a",target:"_blank"},null,8,["href"])])])),_:2},1032,["props"]),(0,n.Wm)(p,{key:"status",props:e},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{color:u.statusTugas[e.row.status].color,class:"q-pa-xs"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(u.statusTugas[e.row.status].label),1)])),_:2},1032,["color"])])),_:2},1032,["props"]),(0,n.Wm)(p,{key:"aksi",props:e},{default:(0,n.w5)((()=>[(0,n._)("div",i,[(0,n.Wm)(m,{label:"Terima Tugas",disable:!(1===e.row.status),onClick:a=>_.terimaTugas(e.row),unelevated:"",icon:"library_books",color:"green"},null,8,["disable","onClick"]),(0,n.Wm)(m,{label:"Kerjakan",disable:!(2===e.row.status||6===e.row.status),unelevated:"",icon:"library_books",color:"green",to:{name:"kerjakanKaryawan",params:{id:e.row.id_master_tugas_kb}}},null,8,["disable","to"])])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","loading"])])])),_:1})}var u=t(6690);const _={data(){return{statusTugas:u.Z,loading:!1,columns:[{name:"nama_karyawan",align:"left",label:"Tugas Dari",field:"nama_karyawan"},{name:"judul_tugas",align:"left",label:"Judul Tugas",field:"judul_tugas"},{name:"deskripsi_tugas",align:"left",label:"Deskripsi",field:"deskripsi_tugas"},{name:"ket_revisi",align:"left",label:"Keterangan Revisi",field:"ket_revisi"},{name:"nama_unit_kerja",align:"left",label:"Unit Kerja",field:"nama_unit_kerja"},{name:"deadline",align:"left",label:"Deadline",field:"deadline"},{name:"lampiran",align:"left",label:"Lampiran",field:"lampiran"},{name:"status",align:"left",label:"Status",field:"status"},{name:"aksi",align:"left",label:"Aksi",field:"aksi"}],rows:[],filter:null}},created(){this.getData()},methods:{getData(){this.loading=!0,this.$axios.get(`karyawan-kb/tugas/get/${this.$getProfile().id_karyawan}`).then((a=>{this.$parseResponse(a.data,!1)&&(this.rows=a.data.data,this.loading=!1)}))},terimaTugas(a){this.$q.dialog({title:"Confirm",message:"Apakah anda sudah menerima tugas hari ini?",cancel:!0,persistent:!0}).onOk((()=>{this.$showLoading();const e=new FormData;e.append("data",JSON.stringify({status:2,ket_revisi:null}));const t=`\n          Yth.\n          ${a.jabatan_karyawan_master_tugas_kb_id_kepala_biroTojabatan_karyawan.karyawan.nama_karyawan} (${a.jabatan_karyawan_master_tugas_kb_id_kepala_biroTojabatan_karyawan.jabatan.nama_jabatan} ${a.jabatan_karyawan_master_tugas_kb_id_kepala_biroTojabatan_karyawan.unit_kerja_jabatan_karyawan_unit_kerjaTounit_kerja.nama_unit_kerja})\n          Tugas telah diterima dan sedang dikerjakan.\n          Judul Tugas : ${a.judul_tugas}\n          Deadline: ${this.$parseDate(a.deadline).fullDate}\n          Deskripsi: ${a.deskripsi_tugas}\n          TTD\n\n          ${this.$getProfile().karyawan.nama_karyawan}\n        `;e.append("msg",t),e.append("noTelp",a.jabatan_karyawan_master_tugas_kb_id_kepala_biroTojabatan_karyawan.karyawan.no_tlpn),this.$axios.put(`karyawan-kb/update/status/${a.id_master_tugas_kb}`,e).finally((()=>this.$hide())).then((a=>{this.$parseResponse(a.data)&&this.getData()}))}))}}};var d=t(1639),k=t(9885),p=t(7580),m=t(3119),w=t(2857),g=t(3532),b=t(7220),y=t(4455),c=t(990),f=t(9984),j=t.n(f);const h=(0,d.Z)(_,[["render",o]]),T=h;j()(_,"components",{QPage:k.Z,QTable:p.Z,QInput:m.Z,QIcon:w.Z,QTr:g.Z,QTd:b.Z,QBtn:y.Z,QBadge:c.Z})}}]);