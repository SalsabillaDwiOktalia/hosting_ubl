"use strict";(globalThis["webpackChunksik_ubl"]=globalThis["webpackChunksik_ubl"]||[]).push([[8416],{8416:(a,e,l)=>{l.r(e),l.d(e,{default:()=>$});var t=l(9835);const n={class:"row items-center justify-end"};function i(a,e,l,i,o,r){const u=(0,t.up)("q-card-section"),s=(0,t.up)("q-btn"),d=(0,t.up)("q-select"),p=(0,t.up)("q-input"),m=(0,t.up)("q-date"),k=(0,t.up)("q-popup-proxy"),_=(0,t.up)("q-icon"),b=(0,t.up)("q-file"),w=(0,t.up)("q-form"),h=(0,t.up)("q-card"),c=(0,t.up)("q-page"),y=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(c,{padding:""},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{flat:""},{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" Tambah Tugas ")])),_:1}),(0,t.Wm)(s,{class:"q-ml-md",icon:"arrow_back",unelevated:"",color:"primary",to:{name:"dashboardKepalaBiro"}}),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,{onSubmit:r.onSubmit},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{label:"Jabatan Pemberi Tugas",modelValue:o.kepalaBiro,"onUpdate:modelValue":e[0]||(e[0]=a=>o.kepalaBiro=a),disable:"",options:o.listKepalaBiro,"option-value":"id_jabatan_karyawan","option-label":a=>`${a.jabatan.nama_jabatan} ${a.unit_kerja_jabatan_karyawan_unit_kerjaTounit_kerja.nama_unit_kerja} (${a.karyawan.nama_karyawan})`},null,8,["modelValue","options","option-label"]),(0,t.Wm)(d,{label:"Ditujukan Ke",modelValue:o.karyawan,"onUpdate:modelValue":e[1]||(e[1]=a=>o.karyawan=a),options:o.listKaryawan,"option-value":"kode_jabatan","option-label":a=>`${a.karyawan.nama_karyawan}`},null,8,["modelValue","options","option-label"]),(0,t.Wm)(p,{label:"Judul Tugas",modelValue:o.form.judul_tugas,"onUpdate:modelValue":e[2]||(e[2]=a=>o.form.judul_tugas=a)},null,8,["modelValue"]),(0,t.Wm)(p,{label:"Deskripsi Tugas",modelValue:o.form.deskripsi_tugas,"onUpdate:modelValue":e[3]||(e[3]=a=>o.form.deskripsi_tugas=a)},null,8,["modelValue"]),(0,t.Wm)(p,{label:"Deadline",modelValue:o.form.deadline,"onUpdate:modelValue":e[6]||(e[6]=a=>o.form.deadline=a),onClick:e[7]||(e[7]=e=>a.$refs.deadline.show()),mask:"date",rules:["date"]},{append:(0,t.w5)((()=>[(0,t.Wm)(_,{name:"event",class:"cursor-pointer"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{cover:"","transition-show":"scale",ref:"deadline","transition-hide":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:o.form.deadline,"onUpdate:modelValue":[e[4]||(e[4]=a=>o.form.deadline=a),e[5]||(e[5]=e=>a.$refs.deadline.hide())]},{default:(0,t.w5)((()=>[(0,t._)("div",n,[(0,t.wy)((0,t.Wm)(s,{label:"Close",color:"primary",flat:""},null,512),[[y]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(b,{outlined:"",modelValue:o.lampiran,"onUpdate:modelValue":e[8]||(e[8]=a=>o.lampiran=a)},{prepend:(0,t.w5)((()=>[(0,t.Wm)(_,{name:"attach_file"})])),_:1},8,["modelValue"]),(0,t.Wm)(s,{label:"Submit Karyawan",color:"primary",unelevated:"",type:"submit"})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1})}l(9665);const o={data(){return{form:{judul_tugas:null,id_kepala_biro:null,id_karyawan:null,deadline:null,deskripsi_tugas:null},id_jabatan:null,lampiran:null,listJabatanKaryawan:null,id_tugas:null,listKepalaBiro:[],listKaryawan:[],kepalaBiro:null,karyawan:null}},async created(){await this.getKepalaBiro(),await this.getNama()},methods:{onSubmit(){this.$showLoading(),this.form.id_kepala_biro=this.kepalaBiro.id_jabatan_karyawan,this.form.id_karyawan=this.karyawan.id_jabatan_karyawan;const a=new FormData;a.append("data",JSON.stringify(this.form)),a.append("lampiran",this.lampiran),a.append("noTelp",this.karyawan.karyawan.no_tlpn),a.append("deadline",this.$parseDate(this.form.deadline).fullDate),a.append("pemberiTugas",`${this.kepalaBiro.jabatan.nama_jabatan} ${this.kepalaBiro.unit_kerja_jabatan_karyawan_unit_kerjaTounit_kerja.nama_unit_kerja} (${this.kepalaBiro.karyawan.nama_karyawan})`),this.$axios.post("/kepala-biro/create",a).finally((()=>this.$hide())).then((a=>{this.$parseResponse(a.data)&&this.$router.push({name:"tugasUntukKaryawan"})}))},async getKepalaBiro(){await this.$axios.get(`jabatan_karyawan/get/${this.$route.params.idJabatanActive}`).then((a=>{if(this.$parseResponse(a.data,!1)){const e=a.data.data;this.kepalaBiro=e,this.listKepalaBiro=[e]}}))},async getNama(){await this.$axios.get(`kepala-biro/get-by-unit-kerja/${this.kepalaBiro.unit_kerja}`).then((a=>{this.$parseResponse(a.data,!1)&&(this.listKaryawan=a.data.data)}))}}};var r=l(1639),u=l(9885),s=l(4458),d=l(3190),p=l(4455),m=l(8326),k=l(6384),_=l(3119),b=l(2857),w=l(2765),h=l(4939),c=l(9420),y=l(2146),f=l(9984),g=l.n(f);const j=(0,r.Z)(o,[["render",i]]),$=j;g()(o,"components",{QPage:u.Z,QCard:s.Z,QCardSection:d.Z,QBtn:p.Z,QForm:m.Z,QSelect:k.Z,QInput:_.Z,QIcon:b.Z,QPopupProxy:w.Z,QDate:h.Z,QFile:c.Z}),g()(o,"directives",{ClosePopup:y.Z})}}]);