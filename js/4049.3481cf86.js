"use strict";(globalThis["webpackChunksik_ubl"]=globalThis["webpackChunksik_ubl"]||[]).push([[4049],{6690:(a,e,l)=>{l.d(e,{Z:()=>s});const s={1:{label:"Tugas Diberikan",color:"positive"},2:{label:"Sedang Dikerjakan",color:"warning"},3:{label:"Sudah Dikerjakan",color:"positive"},4:{label:"Sedang Ditinjau",color:"primary"},5:{label:"Selesai",color:"positive"},6:{label:"Revisi",color:"negative"}}},4049:(a,e,l)=>{l.r(e),l.d(e,{default:()=>W});var s=l(9835),t=l(6970);const i={class:"q-pa-md"},n={class:"row q-gutter-x-xs"},r={class:"q-gutter-x-sm"};function o(a,e,l,o,u,d){const p=(0,s.up)("q-icon"),g=(0,s.up)("q-input"),m=(0,s.up)("q-td"),k=(0,s.up)("q-btn"),w=(0,s.up)("q-badge"),_=(0,s.up)("q-tr"),c=(0,s.up)("q-table"),f=(0,s.up)("q-card-section"),b=(0,s.up)("q-card"),h=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(h,null,{default:(0,s.w5)((()=>[(0,s._)("div",i,[(0,s.Wm)(b,{flat:""},{default:(0,s.w5)((()=>[(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{flat:"",title:"Tugas",rows:u.rows,columns:u.columns,loading:u.loading},{"top-right":(0,s.w5)((()=>[(0,s.Wm)(g,{borderless:"",dense:"",debounce:"300",modelValue:u.filter,"onUpdate:modelValue":e[0]||(e[0]=a=>u.filter=a),placeholder:"Search"},{append:(0,s.w5)((()=>[(0,s.Wm)(p,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,s.w5)((e=>[(0,s.Wm)(_,{props:e},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{key:"nama_karyawan",props:e},{default:(0,s.w5)((()=>[(0,s.Uk)((0,t.zw)(e.row.pimpinanUnit),1)])),_:2},1032,["props"]),(0,s.Wm)(m,{key:"judul_tugas",props:e},{default:(0,s.w5)((()=>[(0,s.Uk)((0,t.zw)(e.row.judul_tugas),1)])),_:2},1032,["props"]),(0,s.Wm)(m,{key:"deskripsi_tugas",props:e},{default:(0,s.w5)((()=>[(0,s.Uk)((0,t.zw)(e.row.deskripsi_tugas),1)])),_:2},1032,["props"]),(0,s.Wm)(m,{key:"ket_revisi",props:e},{default:(0,s.w5)((()=>[(0,s.Uk)((0,t.zw)(e.row.ket_revisi??"-"),1)])),_:2},1032,["props"]),(0,s.Wm)(m,{key:"nama_unit_kerja",props:e},{default:(0,s.w5)((()=>[(0,s.Uk)((0,t.zw)(e.row.nama_unit_kerja),1)])),_:2},1032,["props"]),(0,s.Wm)(m,{key:"deadline",props:e},{default:(0,s.w5)((()=>[(0,s.Uk)((0,t.zw)(a.$parseDate(e.row.deadline).fullDate),1)])),_:2},1032,["props"]),(0,s.Wm)(m,{key:"lampiran",props:e},{default:(0,s.w5)((()=>[(0,s._)("div",n,[(0,s.Wm)(k,{label:"Lampiran",color:"primary",unelevated:"",outline:"",href:`${a.$baseLampiran}${e.row.lampiran}`,type:"a",target:"_blank"},null,8,["href"])])])),_:2},1032,["props"]),(0,s.Wm)(m,{key:"status",props:e},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{color:u.statusTugas[e.row.status].color,class:"q-pa-xs"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,t.zw)(u.statusTugas[e.row.status].label),1)])),_:2},1032,["color"])])),_:2},1032,["props"]),(0,s.Wm)(m,{key:"aksi",props:e},{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s.Wm)(k,{label:"Terima Tugas",disable:!(1===e.row.status),onClick:a=>d.terimaTugas(e.row),unelevated:"",icon:"library_books",color:"green"},null,8,["disable","onClick"]),(0,s.Wm)(k,{label:"Kerjakan",disable:!(2===e.row.status||6===e.row.status),unelevated:"",icon:"library_books",color:"green",to:{name:"kerjakanKepalaBiro",params:{id:e.row.id_tugas}}},null,8,["disable","to"])])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","loading"])])),_:1})])),_:1})])])),_:1})}var u=l(6690);const d={data(){return{statusTugas:u.Z,loading:!1,columns:[{name:"nama_karyawan",align:"left",label:"Tugas Dari",field:"nama_karyawan "},{name:"judul_tugas",align:"left",label:"Judul Tugas",field:"judul_tugas"},{name:"deskripsi_tugas",align:"left",label:"Deskripsi",field:"deskripsi_tugas"},{name:"ket_revisi",align:"left",label:"Keterangan Revisi",field:"ket_revisi"},{name:"nama_unit_kerja",align:"left",label:"Unit Kerja",field:"nama_unit_kerja"},{name:"deadline",align:"left",label:"Deadline",field:"deadline"},{name:"lampiran",align:"left",label:"Lampiran",field:"lampiran"},{name:"status",align:"left",label:"Status",field:"status"},{name:"aksi",align:"left",label:"Aksi",field:"aksi"}],rows:[],filter:null}},created(){this.getData()},methods:{getData(){this.loading=!0,this.$axios.get(`/tugas_pimpinanunit/get/tugas-kepala-biro/${this.$getProfile().id_karyawan}`).finally((()=>{this.loading=!1})).then((a=>{this.$parseResponse(a.data,!1)&&(this.rows=a.data.data,this.loading=!1)}))},terimaTugas(a){this.$q.dialog({title:"Confirm",message:"Apakah anda sudah menerima tugas hari ini?",cancel:!0,persistent:!0}).onOk((()=>{this.$showLoading();const e=new FormData;e.append("data",JSON.stringify({status:2,ket_revisi:null}));const l=`\n          Yth.\n          ${a.pimpinanUnit} (${a.nukpu})\n          Tugas telah diterima dan sedang dikerjakan.\n          Judul Tugas : ${a.judul_tugas}\n          Deadline: ${this.$parseDate(a.deadline).fullDate}\n          Deskripsi: ${a.deskripsi_tugas}\n          TTD\n\n          ${this.$getProfile().karyawan.nama_karyawan}\n        `;e.append("msg",l),e.append("noTelp",a.noTelp),this.$axios.put(`tugas_pimpinanunit/update/status/${a.id_tugas}`,e).finally((()=>this.$hide())).then((a=>{this.$parseResponse(a.data)&&this.getData()}))}))}}};var p=l(1639),g=l(9885),m=l(4458),k=l(3190),w=l(7580),_=l(3119),c=l(2857),f=l(3532),b=l(7220),h=l(4455),y=l(990),T=l(9984),$=l.n(T);const v=(0,p.Z)(d,[["render",o]]),W=v;$()(d,"components",{QPage:g.Z,QCard:m.Z,QCardSection:k.Z,QTable:w.Z,QInput:_.Z,QIcon:c.Z,QTr:f.Z,QTd:b.Z,QBtn:h.Z,QBadge:y.Z})}}]);