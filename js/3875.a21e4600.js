"use strict";(globalThis["webpackChunksik_ubl"]=globalThis["webpackChunksik_ubl"]||[]).push([[3875],{3875:(e,a,t)=>{t.r(a),t.d(a,{default:()=>D});var l=t(9835);const n={key:0},s={class:"row items-center justify-end"},o={class:"row items-center justify-end"};function i(e,a,t,i,r,u){const m=(0,l.up)("q-card-section"),g=(0,l.up)("q-btn"),h=(0,l.up)("q-input"),d=(0,l.up)("q-select"),f=(0,l.up)("q-date"),k=(0,l.up)("q-popup-proxy"),p=(0,l.up)("q-icon"),_=(0,l.up)("q-form"),c=(0,l.up)("q-card"),w=(0,l.up)("q-page"),$=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(w,{padding:""},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Input Karyawan ")])),_:1}),(0,l.Wm)(g,{class:"q-ml-md",icon:"arrow_back",unelevated:"",color:"primary",to:{name:"karyawanAdmin"}}),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_,{onSubmit:u.onSubmit},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{label:"Nama Karyawan",modelValue:r.form.nama_karyawan,"onUpdate:modelValue":a[0]||(a[0]=e=>r.form.nama_karyawan=e),rules:[e=>e&&e.length>0||"Nama Karyawan tidak boleh 0 / kosong !"]},null,8,["modelValue","rules"]),(0,l.Wm)(d,{label:"Status",modelValue:r.form.status,"onUpdate:modelValue":a[1]||(a[1]=e=>r.form.status=e),options:r.opsiStatus},null,8,["modelValue","options"]),"dosen"==this.form.status?((0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(h,{label:"NIDN",modelValue:r.form.nidn,"onUpdate:modelValue":a[2]||(a[2]=e=>r.form.nidn=e),rules:[e=>e&&e.length>0||"NIDN tidak boleh 0 / kosong !"]},null,8,["modelValue","rules"])])):(0,l.kq)("",!0),(0,l.Wm)(d,{label:"Kategori",modelValue:r.kategori,"onUpdate:modelValue":[a[3]||(a[3]=e=>r.kategori=e),a[4]||(a[4]=e=>u.hitung())],options:r.listKategori,"option-value":"id_kategori","option-label":"nama_kategori"},null,8,["modelValue","options"]),(0,l.Wm)(h,{label:"Tanggal Lahir",modelValue:r.form.tanggal_lahir,"onUpdate:modelValue":a[7]||(a[7]=e=>r.form.tanggal_lahir=e),onClick:a[8]||(a[8]=a=>e.$refs.tanggalLahir.show()),mask:"date",rules:["date"]},{append:(0,l.w5)((()=>[(0,l.Wm)(p,{name:"event",class:"cursor-pointer"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{cover:"","transition-show":"scale",ref:"tanggalLahir","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{modelValue:r.form.tanggal_lahir,"onUpdate:modelValue":[a[5]||(a[5]=e=>r.form.tanggal_lahir=e),a[6]||(a[6]=a=>{e.$refs.tanggalLahir.hide(),u.hitung()})]},{default:(0,l.w5)((()=>[(0,l._)("div",s,[(0,l.wy)((0,l.Wm)(g,{label:"Close",color:"primary",flat:""},null,512),[[$]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(h,{label:"Tanggal Masuk Kerja",modelValue:r.form.tanggal_masuk_kerja,"onUpdate:modelValue":a[11]||(a[11]=e=>r.form.tanggal_masuk_kerja=e),onClick:a[12]||(a[12]=a=>e.$refs.tanggalMasukKerja.show()),mask:"date",rules:["date"]},{append:(0,l.w5)((()=>[(0,l.Wm)(p,{name:"event",class:"cursor-pointer"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{cover:"","transition-show":"scale",ref:"tanggalMasukKerja","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{modelValue:r.form.tanggal_masuk_kerja,"onUpdate:modelValue":[a[9]||(a[9]=e=>r.form.tanggal_masuk_kerja=e),a[10]||(a[10]=a=>{e.$refs.tanggalMasukKerja.hide(),u.hitung()})]},{default:(0,l.w5)((()=>[(0,l._)("div",o,[(0,l.wy)((0,l.Wm)(g,{label:"Close",color:"primary",flat:""},null,512),[[$]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(h,{readonly:"",label:"Tanggal Pensiun",modelValue:r.form.tgl_pensiun,"onUpdate:modelValue":a[13]||(a[13]=e=>r.form.tgl_pensiun=e)},null,8,["modelValue"]),(0,l.Wm)(h,{label:"NIK",modelValue:r.form.nik,"onUpdate:modelValue":a[14]||(a[14]=e=>r.form.nik=e),rules:[e=>e&&e.length>0||"NIK tidak boleh 0 / kosong !"]},null,8,["modelValue","rules"]),(0,l.Wm)(h,{label:"Alamat",modelValue:r.form.alamat,"onUpdate:modelValue":a[15]||(a[15]=e=>r.form.alamat=e),type:"textarea",rules:[e=>e&&e.length>0||"Alamat tidak boleh 0 / kosong !"]},null,8,["modelValue","rules"]),(0,l._)("div",null,[(0,l.Wm)(d,{label:"Jenis Kelamin",modelValue:r.form.jenis_kelamin,"onUpdate:modelValue":a[16]||(a[16]=e=>r.form.jenis_kelamin=e),options:r.opsiJenisKelamin,rules:[e=>e&&e.length>0||"Jenis Kelamin tidak boleh 0 / kosong !"]},null,8,["modelValue","options","rules"])]),(0,l._)("div",null,[(0,l.Wm)(d,{label:"Agama",modelValue:r.form.agama,"onUpdate:modelValue":a[17]||(a[17]=e=>r.form.agama=e),options:r.opsiAgama,rules:[e=>e&&e.length>0||"Agama tidak boleh 0 / kosong !"]},null,8,["modelValue","options","rules"])]),(0,l.Wm)(h,{label:"Nomor Telpon",modelValue:r.form.no_tlpn,"onUpdate:modelValue":a[18]||(a[18]=e=>r.form.no_tlpn=e),type:"number",rules:[e=>e&&e.length>0||"Nomor Telepon boleh 0 / kosong !"]},null,8,["modelValue","rules"]),(0,l.Wm)(h,{label:"Gaji Pokok",modelValue:r.form.gaji_pokok,"onUpdate:modelValue":a[19]||(a[19]=e=>r.form.gaji_pokok=e),type:"number",rules:[e=>e&&e.length>0||"Gaji Pokok tidak boleh 0 / kosong !"]},null,8,["modelValue","rules"]),(0,l.Wm)(g,{label:"Submit Karyawan",color:"primary",unelevated:"",type:"submit"})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1})}t(2446);const r=()=>({nama_karyawan:null,status:null,nidn:null,tanggal_lahir:null,tanggal_masuk_kerja:null,kategori:null,nik:null,alamat:null,jenis_kelamin:null,agama:null,gaji_pokok:null,no_tlpn:null}),u={data(){return{form:r(),jk:null,listStatus:[],listKategori:[],opsiStatus:["karyawan","dosen"],opsiJenisKelamin:["Laki-Laki","Perempuan"],opsiAgama:["Islam","Protestan","Khatolik","Buddha","Hindu","Konghuchu"],kategori:null}},created(){this.getStatus(),this.getKategori()},methods:{onSubmit(){this.$showLoading(),"karyawan"==this.form.status&&(this.form.status=2),"dosen"==this.form.status&&(this.form.status=3),this.form.kategori=this.kategori.id_kategori,this.$axios.post("/karyawan/create",this.form).finally((()=>this.$hide())).then((e=>{this.$parseResponse(e.data)&&this.$router.back()}))},getStatus(){this.$axios.get("/status/getall").then((e=>{this.$parseResponse(e.data,!1)&&(this.listStatus=e.data.data)}))},getKategori(){this.$axios.get("/karyawan/kategori/get").then((e=>{this.$parseResponse(e.data,!1)&&(this.listKategori=e.data.data)}))},hitung(){const e=Number(this.kategori?.id_kategori),a=this.form.tanggal_lahir;if(null!==e&&""!==e&&null!==a&&""!==a&&""!==this.form.tanggal_masuk_kerja&&null!==this.form.tanggal_masuk_kerja){const t=this.calculateAge(a);if(1===e)if(t>45)this.rejectUmur();else{const e=65-t,a=(new Date).getFullYear()+e;this.form.tgl_pensiun=`${a}/${(new Date).getMonth()+1}/${(new Date).getDate()}`}else if(2===e)if(t<22||t>=35)this.rejectUmur();else{const e=t+10;if(e<=35){const e=new Date(this.form.tanggal_masuk_kerja).getFullYear()+10;this.form.tgl_pensiun=`${e}/${this.getBulanTgl()}`}else{const e=35-t,a=new Date(this.form.tanggal_masuk_kerja).getFullYear()+e;this.form.tgl_pensiun=`${a}/${this.getBulanTgl()}`}}else if(3===e)if(t<35||t>44)this.rejectUmur();else{const e=t+10;if(e<=45){const e=new Date(this.form.tanggal_masuk_kerja).getFullYear()+10;this.form.tgl_pensiun=`${e}/${this.getBulanTgl()}`}else{const e=45-t,a=new Date(this.form.tanggal_masuk_kerja).getFullYear()+e;this.form.tgl_pensiun=`${a}/${this.getBulanTgl()}`}}else if(4===e||5===e)if(t<30||t>49)this.rejectUmur();else{const e=t+10;if(e<=50){const e=new Date(this.form.tanggal_masuk_kerja).getFullYear()+10;this.form.tgl_pensiun=`${e}/${this.getBulanTgl()}`}else{const e=50-t,a=new Date(this.form.tanggal_masuk_kerja).getFullYear()+e;this.form.tgl_pensiun=`${a}/${this.getBulanTgl()}`}}else if(6===e)if(t<25||t>39)this.rejectUmur();else{const e=t+10;if(e<=40){const e=new Date(this.form.tanggal_masuk_kerja).getFullYear()+10;this.form.tgl_pensiun=`${e}/${this.getBulanTgl()}`}else{const e=40-t,a=new Date(this.form.tanggal_masuk_kerja).getFullYear()+e;this.form.tgl_pensiun=`${a}/${this.getBulanTgl()}`}}else if(7===e)if(t<22||t>29)this.rejectUmur();else{const e=t+10;if(e<=30){const e=new Date(this.form.tanggal_masuk_kerja).getFullYear()+10;this.form.tgl_pensiun=`${e}/${this.getBulanTgl()}`}else{const e=30-t,a=new Date(this.form.tanggal_masuk_kerja).getFullYear()+e;this.form.tgl_pensiun=`${a}/${this.getBulanTgl()}`}}else if(8===e)if(t<17||t>24)this.rejectUmur();else{const e=t+10;if(e<=25){const e=new Date(this.form.tanggal_masuk_kerja).getFullYear()+10;this.form.tgl_pensiun=`${e}/${this.getBulanTgl()}`}else{const e=25-t,a=new Date(this.form.tanggal_masuk_kerja).getFullYear()+e;this.form.tgl_pensiun=`${a}/${this.getBulanTgl()}`}}else if(9===e)if(t<17||t>49)this.rejectUmur();else{const e=t+10;if(e<=50){const e=new Date(this.form.tanggal_masuk_kerja).getFullYear()+10;this.form.tgl_pensiun=`${e}/${this.getBulanTgl()}`}else{const e=50-t,a=new Date(this.form.tanggal_masuk_kerja).getFullYear()+e;this.form.tgl_pensiun=`${a}/${this.getBulanTgl()}`}}else this.form.uang_pensiun=0}},calculateAge(e){const a=new Date(e),t=new Date(`${this.form.tanggal_masuk_kerja} ${(new Date).getHours()}:${(new Date).getMinutes()}:00`);return Math.floor((t-a)/315576e5)},rejectUmur(){this.$q.dialog({title:"Peringatan",message:"Usia tidak memenuhi syarat"}).onOk((()=>{this.resetForm()}))},getBulanTgl(){const e=new Date(this.form.tanggal_masuk_kerja);return`${e.getMonth()+1}/${e.getDate()}`},resetForm(){this.form=r(),this.kategori=null,this.status=null}}};var m=t(1639),g=t(9885),h=t(4458),d=t(3190),f=t(4455),k=t(8326),p=t(3119),_=t(6384),c=t(2857),w=t(2765),$=t(4939),j=t(2146),V=t(9984),b=t.n(V);const y=(0,m.Z)(u,[["render",i]]),D=y;b()(u,"components",{QPage:g.Z,QCard:h.Z,QCardSection:d.Z,QBtn:f.Z,QForm:k.Z,QInput:p.Z,QSelect:_.Z,QIcon:c.Z,QPopupProxy:w.Z,QDate:$.Z}),b()(u,"directives",{ClosePopup:j.Z})}}]);