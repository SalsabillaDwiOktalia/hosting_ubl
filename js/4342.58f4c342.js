"use strict";(globalThis["webpackChunksik_ubl"]=globalThis["webpackChunksik_ubl"]||[]).push([[4342],{4342:(a,e,n)=>{n.r(e),n.d(e,{default:()=>$});var i=n(9835);const t={class:"row items-center justify-end"};function l(a,e,n,l,o,p){const u=(0,i.up)("q-card-section"),d=(0,i.up)("q-btn"),s=(0,i.up)("q-select"),m=(0,i.up)("q-input"),r=(0,i.up)("q-date"),_=(0,i.up)("q-popup-proxy"),b=(0,i.up)("q-icon"),h=(0,i.up)("q-file"),c=(0,i.up)("q-form"),f=(0,i.up)("q-card"),k=(0,i.up)("q-page"),g=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(k,{padding:""},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{flat:""},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Uk)(" Tambah Tugas ")])),_:1}),(0,i.Wm)(d,{class:"q-ml-md",icon:"arrow_back",unelevated:"",color:"primary",to:{name:"tugasPimpinan"}}),(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{onSubmit:p.onSubmit},{default:(0,i.w5)((()=>[(0,i.Wm)(s,{label:"Jabatan Pemberi Tugas",disable:"",modelValue:o.id_jabatan_pimpinan_unit,"onUpdate:modelValue":e[0]||(e[0]=a=>o.id_jabatan_pimpinan_unit=a),options:o.listId_jabatan_pimpinan_unit,"option-value":"kode_jabatan","option-label":a=>`${a.nama_jabatan} (${a.keterangan})`},null,8,["modelValue","options","option-label"]),(0,i.Wm)(s,{label:"Ditujukan Ke",modelValue:o.kepalaBiro,"onUpdate:modelValue":e[1]||(e[1]=a=>o.kepalaBiro=a),options:o.listKepalaBiro,"option-value":"id_jabatan_karyawan","option-label":a=>`${a.nama_jabatan} ${a.nama_unit_kerja} (${a.nama_karyawan})`},null,8,["modelValue","options","option-label"]),(0,i.Wm)(m,{label:"Judul Tugas",modelValue:o.form.judul_tugas,"onUpdate:modelValue":e[2]||(e[2]=a=>o.form.judul_tugas=a)},null,8,["modelValue"]),(0,i.Wm)(m,{label:"Deskripsi Tugas",modelValue:o.form.deskripsi_tugas,"onUpdate:modelValue":e[3]||(e[3]=a=>o.form.deskripsi_tugas=a)},null,8,["modelValue"]),(0,i.Wm)(m,{label:"Deadline",modelValue:o.form.deadline,"onUpdate:modelValue":e[6]||(e[6]=a=>o.form.deadline=a),onClick:e[7]||(e[7]=e=>a.$refs.deadline.show()),mask:"date",rules:["date"]},{append:(0,i.w5)((()=>[(0,i.Wm)(b,{name:"event",class:"cursor-pointer"},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{cover:"","transition-show":"scale",ref:"deadline","transition-hide":"scale"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{modelValue:o.form.deadline,"onUpdate:modelValue":[e[4]||(e[4]=a=>o.form.deadline=a),e[5]||(e[5]=e=>a.$refs.deadline.hide())]},{default:(0,i.w5)((()=>[(0,i._)("div",t,[(0,i.wy)((0,i.Wm)(d,{label:"Close",color:"primary",flat:""},null,512),[[g]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(h,{outlined:"",modelValue:o.lampiran,"onUpdate:modelValue":e[8]||(e[8]=a=>o.lampiran=a)},{prepend:(0,i.w5)((()=>[(0,i.Wm)(b,{name:"attach_file"})])),_:1},8,["modelValue"]),(0,i.Wm)(d,{label:"Submit Karyawan",color:"primary",unelevated:"",type:"submit"})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1})}n(9665);const o={data(){return{form:{judul_tugas:null,id_kepala_biro:null,id_jabatan_pimpinan_unit:null,deadline:null},lampiran:null,kepalaBiro:null,id_jabatan_pimpinan_unit:null,listKepalaBiro:[],listId_jabatan_pimpinan_unit:[]}},created(){this.getKepalaBiro(),this.getId_jabatan_pimpinan_unit()},methods:{onSubmit(){this.$showLoading(),this.form.id_kepala_biro=this.kepalaBiro.id_jabatan_karyawan,this.form.id_jabatan_pimpinan_unit=this.id_jabatan_pimpinan_unit.id_jabatan_karyawan;const a=new FormData;a.append("data",JSON.stringify(this.form)),a.append("lampiran",this.lampiran),a.append("noTelp",this.kepalaBiro.no_tlpn),a.append("deadline",this.$parseDate(this.form.deadline).fullDate),a.append("pemberiTugas",`${this.id_jabatan_pimpinan_unit.nama_unit_kerja} (${this.id_jabatan_pimpinan_unit.nama_karyawan})`),this.$axios.post("/tugas_pimpinanunit/create",a).finally((()=>this.$hide())).then((a=>{this.$parseResponse(a.data)&&this.$router.push({name:"tugasPimpinan"})}))},getKepalaBiro(){this.$axios.get("jabatan_karyawan/get-kepala-biro").then((a=>{this.$parseResponse(a.data,!1)&&(this.listKepalaBiro=a.data.data)}))},getId_jabatan_pimpinan_unit(){this.$axios.get(`karyawan/get-jabatan/by-level/${this.$getProfile().id_karyawan}`).then((a=>{if(this.$parseResponse(a.data,!1)){const e=a.data.data;this.listId_jabatan_pimpinan_unit=e,e.length>0&&(this.id_jabatan_pimpinan_unit=e[0])}}))}}};var p=n(1639),u=n(9885),d=n(4458),s=n(3190),m=n(4455),r=n(8326),_=n(6384),b=n(3119),h=n(2857),c=n(2765),f=n(4939),k=n(9420),g=n(2146),j=n(9984),w=n.n(j);const V=(0,p.Z)(o,[["render",l]]),$=V;w()(o,"components",{QPage:u.Z,QCard:d.Z,QCardSection:s.Z,QBtn:m.Z,QForm:r.Z,QSelect:_.Z,QInput:b.Z,QIcon:h.Z,QPopupProxy:c.Z,QDate:f.Z,QFile:k.Z}),w()(o,"directives",{ClosePopup:g.Z})}}]);